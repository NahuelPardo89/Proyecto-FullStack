<div class="container">
    <h1>Admin Dashboard</h1>
    <h2>Productos</h2>
    
    <button (click)="agregarProducto()" class="btn btnAgregarCategoria">Agregar Producto</button>
  <form class="form-prod" *ngIf="mostrarFormulario" [formGroup]="productoForm" (ngSubmit)="productoForm.valid && agregarProducto()" class="formProducto">
    <mat-form-field class="mat-form-field">
      <input matInput formControlName="nombre" placeholder="Nombre" id="prodNombre">
      <mat-error *ngIf="productoForm.controls['nombre'].invalid && (productoForm.controls['nombre'].dirty || productoForm.controls['nombre'].touched)">
        Nombre es requerido
      </mat-error>
    </mat-form-field>
    <mat-form-field class="mat-form-field">
        <input matInput formControlName="marca" placeholder="Marca">
        <mat-error *ngIf="productoForm.controls['marca'].invalid && (productoForm.controls['marca'].dirty || productoForm.controls['marca'].touched)">
          Marca es requerida
        </mat-error>
      </mat-form-field>
      <mat-form-field class="mat-form-field">
        <textarea matInput formControlName="descripcion" placeholder="Descripcion"></textarea>
        <mat-error *ngIf="productoForm.controls['descripcion'].invalid && (productoForm.controls['descripcion'].dirty || productoForm.controls['descripcion'].touched)">
        Descripcion es requerida
        </mat-error>
      </mat-form-field>
    <mat-form-field class="mat-form-field">
      <input matInput formControlName="precio" type="number" placeholder="Precio">
      <mat-error *ngIf="productoForm.controls['precio'].invalid && (productoForm.controls['precio'].dirty || productoForm.controls['precio'].touched)">
        Precio es requerido y debe ser un número
      </mat-error>
    </mat-form-field>

    <mat-form-field class="mat-form-field">
      <input matInput formControlName="stock" type="number" placeholder="Stock">
      <mat-error *ngIf="productoForm.controls['stock'].invalid && (productoForm.controls['stock'].dirty || productoForm.controls['stock'].touched)">
        Stock es requerido y debe ser un número
      </mat-error>
    </mat-form-field>

    <mat-form-field class="mat-form-field">
      <mat-select formControlName="categoria">
        <mat-option *ngFor="let categoria of categorias" [value]="categoria.id">{{categoria.nombre}}</mat-option>
      </mat-select>
      <mat-error *ngIf="productoForm.controls['categoria'].invalid && (productoForm.controls['categoria'].dirty || productoForm.controls['categoria'].touched)">
        Categoria es requerida
      </mat-error>
    </mat-form-field>

    <button mat-raised-button color="primary" type="submit" (click)="ocultarForm()">Submit</button>
  </form>
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Marca</th>
        <th>Descripción</th>
        <th>Precio</th>
        <th>Stock</th>
        <th>Categoria</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let producto of productos">
        <td>{{producto.id}}</td>
        <td>{{producto.nombre}}</td>
        <td>{{producto.marca}}</td>
        <td>{{producto.descripcion}}</td>
        <td>{{producto.precio}}</td>
        <td>{{producto.stock}}</td>
        <td>{{producto.categoria}}</td>
        <td>
          <button class="btn btn-primary" (click)="editarProducto(producto)">Editar</button>
          <button class="btn btn-danger" (click)="borrarProducto(producto)">Borrar</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="containerCategoria">
    
    <h2>Categorias</h2>
    <button (click)="agregarCategoria()" class="btn btn-succes btnAgregarCategoria">Agregar Categoria</button>
    <form class="formCategoria"  [formGroup]="categoriaForm" *ngIf="mostrarFormCategorias" (ngSubmit)="categoriaForm.valid && agregarCategoria()">
      <!-- Aquí va el código para los campos del formulario de categorías -->
      <mat-form-field class="mat-form-field">
      <input matInput  formControlName="nombre" placeholder="Nombre" value='General' />
      <!-- Y así sucesivamente para los demás campos -->
      
      </mat-form-field>
      <button type="submit" class="btn btn-primary" (click)="ocultarCategoria()">Agregar</button>
    </form>
    <table class="table">
      <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Acciones</th>
      </tr>
    </thead>
      <tr *ngFor="let categoria of categorias">
        <td>{{categoria.id}}</td>
        <td>{{categoria.nombre}}</td>
        <td>
          <!-- <button (click)="editarCategoria(categoria)">Editar</button> -->
          <button (click)="borrarCategoria(categoria)" type="submit" class="btn btn-danger btnCategoria">Borrar</button>
        </td>
      </tr>
    </table>
  </div>
  </div>